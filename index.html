<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Информационный портал кассира</title>
<style>
  body {
    margin: 0;
    font-family: "Times New Roman", Georgia, serif;
    background: #ffffff;
    color: #222222;
  }
  .page {
    min-width: 980px;
  }
  .topbar {
    border-bottom: 3px solid #6e6e6e;
    background: #f5f5f5;
    padding: 8px 16px;
  }
  .topbar-inner {
    width: 1000px;
    margin: 0 auto;
  }
  .brand {
    display: inline-block;
    vertical-align: middle;
  }
  .brand .logo {
    display: inline-block;
    width: 44px;
    height: 24px;
    background: #d81e05;
    color: #ffffff;
    font-weight: bold;
    text-align: center;
    line-height: 24px;
    margin-right: 10px;
    font-family: Arial, sans-serif;
    font-size: 14px;
  }
  .brand .title {
    font-size: 14px;
    font-weight: bold;
    text-transform: uppercase;
  }
  .login {
    float: right;
    font-size: 12px;
    margin-top: 6px;
  }
  .login a {
    color: #333333;
    text-decoration: none;
  }
  .nav {
    background: #7b7b7b;
    padding: 6px 0;
  }
  .nav-inner {
    width: 1000px;
    margin: 0 auto;
  }
  .nav a {
    color: #ffffff;
    text-decoration: none;
    font-size: 13px;
    padding: 3px 10px;
    border: 1px solid #5e5e5e;
    background: #8d8d8d;
    margin-right: 6px;
  }
  .nav a.active {
    background: #ffffff;
    color: #d81e05;
    border-color: #ffffff;
  }
  .content {
    width: 1000px;
    margin: 10px auto 30px;
  }
  .heading {
    font-size: 34px;
    color: #1f5fa4;
    text-transform: uppercase;
    margin: 12px 0 6px;
    font-weight: bold;
  }
  .intro {
    font-size: 16px;
    line-height: 1.4;
    margin-bottom: 14px;
  }
  .portal {
    border: 1px solid #bdbdbd;
    overflow: hidden;
  }
  .portal-head {
    padding: 6px 10px;
    background: #f0f0f0;
    border-bottom: 1px solid #bdbdbd;
    font-size: 13px;
    text-transform: uppercase;
    color: #666666;
  }
  .portal-body {
    width: 100%;
    overflow: hidden;
  }
  .left-panel {
    width: 300px;
    float: left;
    border-right: 1px solid #bdbdbd;
    padding: 10px;
    box-sizing: border-box;
  }
  .right-panel {
    margin-left: 300px;
    padding: 10px;
    box-sizing: border-box;
  }
  .panel-title {
    font-size: 16px;
    font-weight: bold;
    color: #666666;
    text-transform: uppercase;
    margin-bottom: 6px;
  }
  .search-row {
    font-size: 12px;
    margin-bottom: 8px;
  }
  .search-row label {
    display: inline-block;
    width: 110px;
  }
  .search-row input {
    width: 140px;
    padding: 2px 4px;
    border: 1px solid #bdbdbd;
    font-size: 12px;
  }
  .search-row button {
    padding: 2px 6px;
    font-size: 12px;
    border: 1px solid #bdbdbd;
    background: #ffffff;
    cursor: pointer;
  }
  .tree {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 13px;
  }
  .tree li {
    margin: 2px 0;
  }
  .tree .node {
    cursor: pointer;
    color: #1f5fa4;
  }
  .tree .leaf {
    cursor: pointer;
    color: #1f5fa4;
  }
  .tree .hidden {
    display: none;
  }
  .tree .toggle {
    display: inline-block;
    width: 14px;
    height: 14px;
    text-align: center;
    line-height: 12px;
    border: 1px solid #9aa9c0;
    font-family: Arial, sans-serif;
    font-size: 11px;
    margin-right: 4px;
    color: #1f5fa4;
  }
  .tree .match {
    color: #c00000;
    font-weight: bold;
  }
  .doc-area {
    border: 1px solid #bdbdbd;
    height: 360px;
    overflow-y: auto;
    padding: 10px;
    box-sizing: border-box;
    font-size: 13px;
  }
  .doc-area h3 {
    margin: 0 0 10px;
    color: #1f5fa4;
    text-transform: uppercase;
    font-size: 16px;
  }
  .news-item {
    margin-bottom: 12px;
  }
  .news-item .date {
    color: #c00000;
    font-weight: bold;
    font-size: 12px;
  }
  .doc-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .doc-list li {
    margin-bottom: 6px;
    color: #1f5fa4;
    cursor: pointer;
  }
  .doc-list li .doc-number {
    color: #666666;
    margin-right: 4px;
  }
  .doc-list li:hover {
    text-decoration: underline;
  }
  .tooltip {
    position: absolute;
    background: #f8f8f8;
    border: 1px solid #bdbdbd;
    padding: 6px 8px;
    font-size: 12px;
    max-width: 280px;
    display: none;
    z-index: 50;
  }
  .hint {
    font-size: 12px;
    color: #666666;
    margin: 6px 0 0;
  }
  .footer-note {
    font-size: 12px;
    color: #666666;
    margin-top: 12px;
  }
  .clearfix:after {
    content: "";
    display: block;
    clear: both;
  }
</style>
</head>
<body>
<div class="page">
  <div class="topbar">
    <div class="topbar-inner clearfix">
      <div class="brand">
        <span class="logo">РЖД</span>
        <span class="title">Информационный портал кассира</span>
      </div>
      <div class="login"><a href="#">Войти</a></div>
    </div>
  </div>
  <div class="nav">
    <div class="nav-inner">
      <a class="active" href="index.html">На главную</a>
      <a href="#">О программе</a>
      <a href="admin.html">Ввод контента</a>
    </div>
  </div>

  <div class="content">
    <div class="heading">Информационный портал кассира</div>
    <div class="intro">
      Для обеспечения оперативного доступа к нормативно‑справочной информации и повышения качества обслуживания
      пассажиров разработан web‑сайт «Информационный портал кассира». Вся информация сгруппирована по разделам,
      доступна для поиска и удобна для ежедневной работы.
    </div>

    <div class="portal">
      <div class="portal-head">Доступные документы</div>
      <div class="portal-body clearfix">
        <div class="left-panel">
          <div class="search-row">
            <label for="sectionSearch">Поиск по разделам:</label>
            <input type="text" id="sectionSearch" />
            <button type="button" id="sectionSearchBtn">Найти</button>
          </div>
          <ul class="tree" id="treeRoot"></ul>
          <div class="hint">Найдены совпадения — красным полужирным.</div>
        </div>
        <div class="right-panel">
          <div class="search-row">
            <label for="docSearch">Поиск по документам:</label>
            <input type="text" id="docSearch" />
            <button type="button" id="docSearchBtn">Найти</button>
          </div>
          <div class="doc-area" id="docArea"></div>
          <div class="footer-note">Для полного названия документа наведите указатель мыши на строку.</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="tooltip" id="tooltip"></div>
<script>
  (function () {
    var data = {
      news: [
        { date: "13.03.2024", text: "Внесены изменения в раздел №4 «ОПП» (пример новостной записи)." },
        { date: "11.03.2024", text: "Обновлен перечень вопросов для билетных кассиров." },
        { date: "06.03.2024", text: "Добавлен пункт по оформлению услуг по телефону." }
      ],
      info: [
        { title: "Перечень вопросов для кассиров", children: [] },
        { title: "Скидки внутригосударственные", children: [] },
        { title: "Скидки межгосударственные", children: [] },
        { title: "Поезда и вагоны", children: [
          { title: "Туристические поезда" },
          { title: "Поезда и классы обслуживания" },
          { title: "Правила оформления проездных документов" }
        ]}
      ],
      legal: [
        { number: "1", title: "ФЗ от 10 января 2003г. №17‑ФЗ «О железнодорожном транспорте»" },
        { number: "2", title: "ФЗ от 10 января 2003г. №18‑ФЗ «Устав железнодорожного транспорта»" },
        { number: "3", title: "Правила оказания услуг по перевозкам на железнодорожном транспорте" },
        { number: "4", title: "Правила перевозок пассажиров, багажа и грузобагажа" },
        { number: "5", title: "Соглашение между РФ и Литовской Республикой" },
        { number: "6", title: "Правила следования в Калининградскую область" },
        { number: "7", title: "Приказ Минтранса РФ «Об установлении формы электронного проездного документа»" }
      ]
    };

    var treeRoot = document.getElementById("treeRoot");
    var docArea = document.getElementById("docArea");
    var tooltip = document.getElementById("tooltip");

    function createTree() {
      treeRoot.innerHTML = "";
      var topItems = [
        { key: "news", title: "Новости" },
        { key: "info", title: "Информация для билетных кассиров" },
        { key: "legal", title: "Нормативно‑правовая информация" }
      ];

      for (var i = 0; i < topItems.length; i++) {
        var item = document.createElement("li");
        item.setAttribute("data-key", topItems[i].key);
        var toggle = document.createElement("span");
        toggle.className = "toggle";
        toggle.innerHTML = "+";
        item.appendChild(toggle);

        var label = document.createElement("span");
        label.className = "node";
        label.innerHTML = topItems[i].title;
        item.appendChild(label);

        var list = document.createElement("ul");
        list.className = "tree hidden";

        if (topItems[i].key === "news") {
          var li = document.createElement("li");
          li.innerHTML = "Все новости";
          li.className = "leaf";
          li.setAttribute("data-action", "news");
          list.appendChild(li);
        }

        if (topItems[i].key === "info") {
          for (var j = 0; j < data.info.length; j++) {
            var infoItem = document.createElement("li");
            var hasChildren = data.info[j].children && data.info[j].children.length > 0;
            if (hasChildren) {
              var t = document.createElement("span");
              t.className = "toggle";
              t.innerHTML = "+";
              infoItem.appendChild(t);
            } else {
              var placeholder = document.createElement("span");
              placeholder.className = "toggle";
              placeholder.innerHTML = "";
              infoItem.appendChild(placeholder);
            }

            var infoLabel = document.createElement("span");
            infoLabel.className = "leaf";
            infoLabel.innerHTML = data.info[j].title;
            infoLabel.setAttribute("data-action", "info");
            infoLabel.setAttribute("data-title", data.info[j].title);
            infoItem.appendChild(infoLabel);

            if (hasChildren) {
              var sub = document.createElement("ul");
              sub.className = "tree hidden";
              for (var k = 0; k < data.info[j].children.length; k++) {
                var subLi = document.createElement("li");
                subLi.innerHTML = data.info[j].children[k].title;
                subLi.className = "leaf";
                subLi.setAttribute("data-action", "info");
                subLi.setAttribute("data-title", data.info[j].children[k].title);
                sub.appendChild(subLi);
              }
              infoItem.appendChild(sub);
            }
            list.appendChild(infoItem);
          }
        }

        if (topItems[i].key === "legal") {
          for (var l = 0; l < data.legal.length; l++) {
            var legalItem = document.createElement("li");
            legalItem.innerHTML = data.legal[l].number + ". " + data.legal[l].title;
            legalItem.className = "leaf";
            legalItem.setAttribute("data-action", "legal");
            legalItem.setAttribute("data-title", data.legal[l].title);
            legalItem.setAttribute("data-number", data.legal[l].number);
            list.appendChild(legalItem);
          }
        }

        item.appendChild(list);
        treeRoot.appendChild(item);
      }
    }

    function setDefaultView() {
      renderNews();
    }

    function renderNews() {
      docArea.innerHTML = "";
      var title = document.createElement("h3");
      title.innerHTML = "Новости";
      docArea.appendChild(title);
      for (var i = 0; i < data.news.length; i++) {
        var block = document.createElement("div");
        block.className = "news-item";
        block.innerHTML = '<div class="date">' + data.news[i].date + '</div>' +
          '<div>' + data.news[i].text + '</div>';
        docArea.appendChild(block);
      }
    }

    function renderInfo(titleText) {
      docArea.innerHTML = "";
      var title = document.createElement("h3");
      title.innerHTML = "Информация для билетных кассиров";
      docArea.appendChild(title);
      var p = document.createElement("p");
      p.innerHTML = "Выбран раздел: <b>" + titleText + "</b>.";
      docArea.appendChild(p);
      var info = document.createElement("p");
      info.innerHTML = "Здесь отображается текст раздела или список документов. Сейчас используется заглушка.";
      docArea.appendChild(info);
    }

    function renderLegal(itemTitle) {
      docArea.innerHTML = "";
      var title = document.createElement("h3");
      title.innerHTML = "Нормативно‑правовая информация";
      docArea.appendChild(title);
      var list = document.createElement("ul");
      list.className = "doc-list";
      for (var i = 0; i < data.legal.length; i++) {
        var li = document.createElement("li");
        li.setAttribute("data-title", data.legal[i].title);
        li.setAttribute("data-number", data.legal[i].number);
        li.innerHTML = '<span class="doc-number">' + data.legal[i].number + '.</span>' + data.legal[i].title;
        list.appendChild(li);
      }
      docArea.appendChild(list);
      var detail = document.createElement("p");
      detail.innerHTML = "Выбран документ: <b>" + itemTitle + "</b>.";
      docArea.appendChild(detail);
    }

    function toggleList(toggleEl) {
      var list = toggleEl.parentNode.getElementsByTagName("ul")[0];
      if (!list) {
        return;
      }
      if (list.className.indexOf("hidden") > -1) {
        list.className = list.className.replace("hidden", "");
        toggleEl.innerHTML = "-";
      } else {
        list.className += " hidden";
        toggleEl.innerHTML = "+";
      }
    }

    function clearMatches() {
      var nodes = treeRoot.getElementsByTagName("span");
      for (var i = 0; i < nodes.length; i++) {
        nodes[i].className = nodes[i].className.replace("match", "");
      }
      var items = treeRoot.getElementsByTagName("li");
      for (var j = 0; j < items.length; j++) {
        items[j].style.display = "";
      }
    }

    function searchSections() {
      clearMatches();
      var value = document.getElementById("sectionSearch").value.toLowerCase();
      if (!value) {
        return;
      }
      var labels = treeRoot.getElementsByTagName("span");
      for (var i = 0; i < labels.length; i++) {
        if (labels[i].className.indexOf("node") > -1 || labels[i].className.indexOf("leaf") > -1) {
          var text = labels[i].innerHTML.toLowerCase();
          if (text.indexOf(value) > -1) {
            labels[i].className += " match";
            var parent = labels[i].parentNode;
            parent.style.display = "";
          } else {
            var parentHide = labels[i].parentNode;
            if (parentHide.getElementsByTagName("ul").length === 0) {
              parentHide.style.display = "none";
            }
          }
        }
      }
    }

    function searchDocs() {
      var value = document.getElementById("docSearch").value.toLowerCase();
      if (!value) {
        return;
      }
      var items = docArea.getElementsByTagName("li");
      for (var i = 0; i < items.length; i++) {
        var text = items[i].innerText.toLowerCase();
        if (text.indexOf(value) > -1) {
          items[i].style.fontWeight = "bold";
          items[i].style.color = "#c00000";
        } else {
          items[i].style.fontWeight = "normal";
          items[i].style.color = "#1f5fa4";
        }
      }
    }

    function showTooltip(evt, text) {
      tooltip.style.display = "block";
      tooltip.innerHTML = text;
      tooltip.style.left = (evt.pageX + 10) + "px";
      tooltip.style.top = (evt.pageY + 10) + "px";
    }

    function hideTooltip() {
      tooltip.style.display = "none";
    }

    function bindEvents() {
      treeRoot.onclick = function (evt) {
        var target = evt.target || evt.srcElement;
        if (target.className.indexOf("toggle") > -1) {
          toggleList(target);
        }
        if (target.className.indexOf("leaf") > -1) {
          var action = target.getAttribute("data-action");
          var title = target.getAttribute("data-title") || target.innerText;
          if (action === "news") {
            renderNews();
          }
          if (action === "info") {
            renderInfo(title);
          }
          if (action === "legal") {
            renderLegal(title);
          }
        }
      };

      docArea.onmouseover = function (evt) {
        var target = evt.target || evt.srcElement;
        if (target && target.tagName === "LI" && target.getAttribute("data-title")) {
          var num = target.getAttribute("data-number") || "";
          var title = target.getAttribute("data-title");
          var text = (num ? num + ". " : "") + title;
          showTooltip(evt, text);
        }
      };

      docArea.onmousemove = function (evt) {
        if (tooltip.style.display === "block") {
          tooltip.style.left = (evt.pageX + 10) + "px";
          tooltip.style.top = (evt.pageY + 10) + "px";
        }
      };

      docArea.onmouseout = function () {
        hideTooltip();
      };

      document.getElementById("sectionSearchBtn").onclick = searchSections;
      document.getElementById("docSearchBtn").onclick = searchDocs;
    }

    createTree();
    bindEvents();
    setDefaultView();
  })();
</script>
</body>
</html>
